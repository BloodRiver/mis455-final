{% extends "portal/dashboard/base.html" %}

{% block title %}Profile Management{% endblock %}

{% load static %}
{% block style %}
    <link href="{% static 'portal/dashboard/profile_management.css' %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block body %}

    <div class="profile-container">
        <h2 class="section-title">Student Profile Management</h2>

        <form id="profile-form">
            <!-- Tabs Navigation -->
            <ul class="nav nav-tabs" id="profileTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="personal-tab" data-bs-toggle="tab" data-bs-target="#personal" type="button" role="tab" aria-controls="personal" aria-selected="true">Personal Info</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Contact Info</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="family-tab" data-bs-toggle="tab" data-bs-target="#family" type="button" role="tab" aria-controls="family" aria-selected="false">Family & Emergency</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="financial-tab" data-bs-toggle="tab" data-bs-target="#financial" type="button" role="tab" aria-controls="financial" aria-selected="false">Financial Info</button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="profileTabsContent">

                <!-- Personal Information Tab -->
                <div class="tab-pane fade show active" id="personal" role="tabpanel" aria-labelledby="personal-tab">
                    <div class="profile-photo-container">
                        <img id="profile-photo-preview" src="https://placehold.co/150x150/e9ecef/adb5bd?text=Photo" alt="Profile Photo" class="profile-photo-preview">
                        <br>
                        <input type="file" class="form-control" id="student_photo" accept="image/*" style="width: fit-content; margin: auto;">
                        <small class="help-text">Click to upload or change your profile photo.</small>
                    </div>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="student_id" class="form-label">Student ID</label>
                            <input type="text" class="form-control" id="student_id" value="S1234567" disabled>
                            <small class="help-text">Your unique student identifier. This field cannot be changed.</small>
                        </div>
                        <div class="col-md-6">
                            <label for="full_name" class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="full_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="blood_group" class="form-label">Blood Group</label>
                            <select class="form-select" id="blood_group" required>
                                <option value="" selected disabled>Select...</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div class="col-md-12">
                            <label class="form-label">Special Conditions</label>
                            <div class="special-conditions-grid">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="physical-disability" id="physical-disability">
                                    <label class="form-check-label" for="physical-disability">Physical Disability</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="mental-disability" id="mental-disability">
                                    <label class="form-check-label" for="mental-disability">Mental Disability</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="visual-impairment" id="visual-impairment">
                                    <label class="form-check-label" for="visual-impairment">Visual Impairment</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="hearing-impairment" id="hearing-impairment">
                                    <label class="form-check-label" for="hearing-impairment">Hearing Impairment</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="allergy" id="allergy">
                                    <label class="form-check-label" for="allergy">Allergies</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="epilepsy" id="epilepsy">
                                    <label class="form-check-label" for="epilepsy">Epilepsy</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="asthma" id="asthma">
                                    <label class="form-check-label" for="asthma">Asthma</label>
                                </div>
                            </div>
                            <small class="help-text">Please check all that apply. This information helps us provide better support.</small>
                        </div>
                    </div>
                </div>

                <!-- Contact Information Tab -->
                <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="phone_number" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone_number" required>
                        </div>
                        <div class="col-12">
                            <label for="present_address" class="form-label">Present Address</label>
                            <textarea class="form-control" id="present_address" rows="3" required></textarea>
                        </div>
                        <div class="col-12">
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="same_as_present">
                                <label class="form-check-label" for="same_as_present">Permanent address is the same as present address</label>
                            </div>
                        </div>
                        <div class="col-12 mt-3" id="permanent-address-fields">
                            <label for="permanent_address" class="form-label">Permanent Address</label>
                            <textarea class="form-control" id="permanent_address" rows="3" required></textarea>
                        </div>
                    </div>
                </div>

                <!-- Family & Emergency Tab -->
                <div class="tab-pane fade" id="family" role="tabpanel" aria-labelledby="family-tab">
                    <h5 class="mb-3">Parent/Guardian Information</h5>
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label for="father_name" class="form-label">Father's Full Name</label>
                            <input type="text" class="form-control" id="father_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="father_phone" class="form-label">Father's Phone Number</label>
                            <input type="tel" class="form-control" id="father_phone" required>
                        </div>
                        <div class="col-md-6">
                            <label for="father_email" class="form-label">Father's Email</label>
                            <input type="email" class="form-control" id="father_email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="father_education" class="form-label">Father's Education (Optional)</label>
                            <input type="text" class="form-control" id="father_education">
                        </div>
                        <div class="col-md-12">
                            <label for="father_profession" class="form-label">Father's Profession</label>
                            <input type="text" class="form-control" id="father_profession" required>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label for="mother_name" class="form-label">Mother's Full Name</label>
                            <input type="text" class="form-control" id="mother_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="mother_phone" class="form-label">Mother's Phone Number</label>
                            <input type="tel" class="form-control" id="mother_phone" required>
                        </div>
                        <div class="col-md-6">
                            <label for="mother_email" class="form-label">Mother's Email</label>
                            <input type="email" class="form-control" id="mother_email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="mother_education" class="form-label">Mother's Education (Optional)</label>
                            <input type="text" class="form-control" id="mother_education">
                        </div>
                        <div class="col-md-12">
                            <label for="mother_profession" class="form-label">Mother's Profession</label>
                            <input type="text" class="form-control" id="mother_profession" required>
                        </div>
                    </div>

                    <h5 class="mb-3">Emergency Contact</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="emergency_name" class="form-label">Emergency Contact Name</label>
                            <input type="text" class="form-control" id="emergency_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="emergency_relationship" class="form-label">Relationship to Student</label>
                            <input type="text" class="form-control" id="emergency_relationship" required>
                        </div>
                        <div class="col-12">
                            <label class="form-label">Emergency Contact Phone Number</label>
                            <div id="emergency-phone-numbers">
                                <div class="input-group mb-2">
                                    <input type="tel" class="form-control" name="emergency_phone_1" required>
                                </div>
                            </div>
                            <button type="button" class="btn btn-secondary btn-sm" id="add-emergency-phone"><i class="fas fa-plus me-2"></i>Add Another Number (Optional)</button>
                        </div>
                    </div>
                </div>

                <!-- Financial Information Tab -->
                <div class="tab-pane fade" id="financial" role="tabpanel" aria-labelledby="financial-tab">
                    <h5 class="mb-3">Income & Guarantor Details</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="family_income" class="form-label">Total Annual Family Income (Optional)</label>
                            <input type="number" class="form-control" id="family_income">
                        </div>
                        <div class="col-md-6">
                            <label for="guarantor_name" class="form-label">Financial Guarantor Name</label>
                            <input type="text" class="form-control" id="guarantor_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="guarantor_phone" class="form-label">Financial Guarantor Phone Number</label>
                            <input type="tel" class="form-control" id="guarantor_phone" required>
                        </div>
                        <div class="col-md-6">
                            <label for="guarantor_email" class="form-label">Financial Guarantor Email</label>
                            <input type="email" class="form-control" id="guarantor_email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="guarantor_relationship" class="form-label">Relationship with Student</label>
                            <input type="text" class="form-control" id="guarantor_relationship" required>
                        </div>
                        <div class="col-md-6">
                            <label for="guarantor_income" class="form-label">Approximate Yearly Income of Financial Guarantor</label>
                            <input type="number" class="form-control" id="guarantor_income" required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="mt-5">
                <button type="submit" class="btn btn-primary w-100">Save Changes</button>
            </div>
        </form>
    </div>
{% endblock %}

{% block script %}
    <script type="text/javascript" src="{% static 'portal/dashboard/profile_management.js' %}">
    </script>
{% endblock %}
