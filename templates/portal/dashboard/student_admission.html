{% extends 'main/base.html' %}

{% block title %}Student Admission{% endblock %}

{% load static %}
{% block style %}
    <link href="{% static 'portal/dashboard/student_admission.css' %}" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'main/index.css' %}">
{% endblock %}

{% block body %}
    <main class="container my-5">
        <div class="main-content">
            <h2 class="text-center section-title mb-4">Student Admission Application</h2>
            
            <!-- Progress Bar -->
            <div class="progress progress-container">
                <div class="progress-bar" role="progressbar" id="progressBar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

            <form method="POST" enctype="multipart/form-data" id="admission-form">
                {% csrf_token %}
                <!-- Step 1: Personal Information -->
                <div class="form-step active" data-step="0">
                    <h5 class="section-header">Personal Information</h5>
                    <div class="row g-3 mb-3">
                        <div class="profile-photo-container d-flex align-items-center flex-column">
                            <img id="profile-photo-preview" src="https://placehold.co/150x150/e9ecef/adb5bd?text=Photo" alt="Profile Photo" class="profile-photo-preview" style="max-width: 300px; max-height: 300px;">
                            <br>
                            <input type="file" class="form-control" id="student_photo" id="id_photo" name="photo" accept=".jpg, .jpeg, .png, .webp, image/jpeg, image/png, image/webp" style="width: fit-content; margin: auto;" required>
                            <small class="help-text">Please Passport Size Photo for your ID Card</small>
                        </div>
                    </div>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="id_first_name" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="id_first_name" name="first_name" required>
                            <label for="id_last_name" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="id_last_name" name="last_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_blood_group" class="form-label">Blood Group</label>
                            <select class="form-select" id="id_blood_group" name="blood_group" required>
                                <option value="" selected disabled>Select...</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        {% comment %} <div class="col-12">
                            <label class="form-label">Special Conditions</label>
                            <div class="row">
                                <div class="col-sm-6 col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="physical-disability" id="physical-disability">
                                        <label class="form-check-label" for="physical-disability">Physical Disability</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="mental-disability" id="mental-disability">
                                        <label class="form-check-label" for="mental-disability">Mental Disability</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="visual-impairment" id="visual-impairment">
                                        <label class="form-check-label" for="visual-impairment">Visual Impairment</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="hearing-impairment" id="hearing-impairment">
                                        <label class="form-check-label" for="hearing-impairment">Hearing Impairment</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="allergy" id="allergy">
                                        <label class="form-check-label" for="allergy">Allergies</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="epilepsy" id="epilepsy">
                                        <label class="form-check-label" for="epilepsy">Epilepsy</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="asthma" id="asthma">
                                        <label class="form-check-label" for="asthma">Asthma</label>
                                    </div>
                                </div>
                            </div>
                            <small class="form-text text-muted">Please check all that apply.</small>
                        </div>
                        {% endcomment %}
                    </div>
                </div>

                <!-- Step 2: Contact Information -->
                <div class="form-step" data-step="1">
                    <h5 class="section-header">Contact Information</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="id_email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="id_email" name="email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_phone_number" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="id_phone_number" name="phone_number" required>
                        </div>
                        <div class="col-12">
                            <label for="id_present_address" class="form-label">Present Address</label>
                            <textarea class="form-control" id="id_present_address" name="present_address" rows="3" required></textarea>
                        </div>
                        <div class="col-12">
                            <div class="form-check mt-2">
                                <input class="form-check-input" type="checkbox" id="id_same_as_present" name="same_as_present">
                                <label class="form-check-label" for="id_same_as_present">Permanent address is the same as present address</label>
                            </div>
                        </div>
                        <div class="col-12 mt-3" id="permanent-address-fields">
                            <label for="id_permanent_address" class="form-label">Permanent Address</label>
                            <textarea class="form-control" id="id_permanent_address" name="permanent_address" rows="3" required></textarea>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Family & Emergency -->
                <div class="form-step" data-step="2">
                    <h5 class="section-header">Family &amp; Emergency</h5>
                    <h6 class="mb-3">Parent/Guardian Information</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label for="id_father_full_name" class="form-label">Father's Full Name</label>
                            <input type="text" class="form-control" id="id_father_full_name" name="father_full_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_father_phone_number" class="form-label">Father's Phone Number</label>
                            <input type="tel" class="form-control" id="id_father_phone_number" name="father_phone_number" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_father_email" class="form-label">Father's Email</label>
                            <input type="email" class="form-control" id="id_father_email" name="father_email" required>
                        </div>
                        <div class="col-12">
                            <label for="id_father_profession" class="form-label">Father's Profession</label>
                            <input type="text" class="form-control" id="id_father_profession" name="father_profession" required>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label for="id_mother_full_name" class="form-label">Mother's Full Name</label>
                            <input type="text" class="form-control" id="id_mother_full_name" name="mother_full_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_mother_phone_number" class="form-label">Mother's Phone Number</label>
                            <input type="tel" class="form-control" id="id_mother_phone_number" name="mother_phone_number" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_mother_email" class="form-label">Mother's Email</label>
                            <input type="email" class="form-control" id="id_mother_email" name="mother_email" required>
                        </div>
                        <div class="col-12">
                            <label for="id_mother_profession" class="form-label">Mother's Profession</label>
                            <input type="text" class="form-control" id="id_mother_profession" name="mother_profession" required>
                        </div>
                    </div>

                    <h6 class="mb-3">Emergency Contact</h6>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="id_emergency_contact_1_name" class="form-label">Emergency Contact Name</label>
                            <input type="text" class="form-control" id="id_emergency_contact_1_name" name="emergency_contact_1_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_emergency_contact_1_relation" class="form-label">Relationship to Student</label>
                            <input type="text" class="form-control" id="id_emergency_contact_1_relation" name="emergency_contact_1_relation" required>
                        </div>
                        <div class="col-12">
                            <label class="form-label">Emergency Contact Phone Number</label>
                            <div id="emergency-phone-numbers">
                                <div class="input-group mb-2">
                                    <input type="tel" class="form-control" id="id_emergency_contact_1_phone" name="emergency_contact_1_phone" required>
                                </div>
                            </div>
                            {% comment %} <button type="button" class="btn btn-secondary btn-sm" id="add-emergency-phone"><i class="fas fa-plus me-2"></i>Add Another Number (Optional)</button> {% endcomment %}
                        </div>
                    </div>
                </div>

                <!-- Step 4: Financial Information -->
                <div class="form-step" data-step="3">
                    <h5 class="section-header">Financial Information</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="id_total_annual_family_income" class="form-label">Total Annual Family Income (Optional)</label>
                            <input type="number" class="form-control" id="id_total_annual_family_income" name="total_annual_family_income">
                        </div>
                        <div class="col-md-6">
                            <label for="id_financial_guarantor_name" class="form-label">Financial Guarantor Name</label>
                            <input type="text" class="form-control" id="id_financial_guarantor_name" name="financial_guarantor_name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_financial_guarantor_phone_number" class="form-label">Financial Guarantor Phone Number</label>
                            <input type="tel" class="form-control" id="id_financial_guarantor_phone_number" name="financial_guarantor_phone_number" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_financial_guarantor_email" class="form-label">Financial Guarantor Email</label>
                            <input type="email" class="form-control" id="id_financial_guarantor_email" name="financial_guarantor_email" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_financial_guarantor_relation" class="form-label">Relationship with Student</label>
                            <input type="text" class="form-control" id="id_financial_guarantor_relation" name="financial_guarantor_relation" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_financial_guarantor_approx_yearly_income" class="form-label">Approximate Yearly Income of Financial Guarantor</label>
                            <input type="number" class="form-control" id="id_financial_guarantor_approx_yearly_income" name="financial_guarantor_approx_yearly_income" required>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Documents Upload -->
                <div class="form-step" data-step="4">
                    <h5 class="section-header">Documents Upload</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="id_olevel_ssc_certificate" class="form-label">O-Levels or SSC Certificate</label>
                            <input type="file" class="form-control" id="id_olevel_ssc_certificate" name="olevel_ssc_certificate" required accept=".pdf, application/pdf">
                            <small class="form-text text-muted">PDF file only.</small>
                        </div>
                        <div class="col-md-6">
                            <label for="id_alevel_ssc_certificate" class="form-label">A-Levels or HSC Certificate</label>
                            <input type="file" class="form-control" id="id_alevel_ssc_certificate" name="alevel_ssc_certificate" accept=".pdf, application/pdf" required>
                            <small class="form-text text-muted">PDF file only.</small>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="d-flex justify-content-between mt-5">
                    <button type="button" class="btn btn-secondary" id="prevBtn" style="display: none;">Previous</button>
                    <div>
                        <button type="button" class="btn btn-primary" id="nextBtn">Next</button>
                        <button type="submit" class="btn btn-primary" id="submitBtn" style="display: none;">Submit Application</button>
                    </div>
                </div>
            </form>
        </div>
    </main>
{% endblock %}

{% block script %}
    <script type="text/javascript" src="{% static 'portal/dashboard/student_admission.js' %}">
    </script>
{% endblock %}
